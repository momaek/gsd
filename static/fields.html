<!-- fields.html -->
{{$package := .Package}}

{{if not .Expand}}

  {{with .Fields}}
  <div class="table-responsive">
    <table class="table table-bordered table-hover table-fields">
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {{range $index, $field := .}}
          <tr>
            <td>
              {{with $field.Names}}
              <ul class="list-unstyled mb-0">
                {{range .}}<li>{{ .Name }}</li>{{end}}
              </ul>
              {{else}}
                arg{{inc $index 1}}
              {{end}}
            </td>
            <td>{{node_html $package .Field.Type true | unescaped}}</td>
            <td>
              {{comment_html .Doc.Text | unescaped}}
              {{comment_html .Comment.Text | unescaped}}
            </td>
          </tr>
        {{end}}
      </tbody>
    </table>
  </div>
  {{end}}

{{else}}

  {{with .Fields}}
    {{range $index, $field := .}}

      <div class="callout callout-info">
        <div>
          {{with $field.Names}}
            <pre>{{join $field.JoinNames ","}} {{node_html $package $field.Field.Type true | unescaped}}</pre>
          {{else}}
            <pre>arg{{inc $index 1}} {{node_html $package .Field.Type true | unescaped}}</pre>
          {{end}}

          {{comment_html .Doc.Text | unescaped}}
          {{comment_html .Comment.Text | unescaped}}
        </div>

        {{$type_fields := indent_filter (type_fields .Type)}}
        {{if $type_fields}}
        <div class="table-responsive">
          <table class="table table-bordered table-hover table-fields">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              {{range $type_fields}}
              <tr>
                <td>
                  <ul class="list-unstyled mb-0">
                    {{range .Names}}
                    <li>{{ .Name }}</li>
                    {{end}}
                  </ul>
                </td>
                <td>{{node_html $package .Type true | unescaped}}</td>
                <td>
                  {{comment_html .Doc.Text | unescaped}}
                  {{comment_html .Comment.Text | unescaped}}
                </td>
              </tr>
              {{end}}
            </tbody>
          </table>
        </div>
        {{end}}
      </div>

    {{end}}
  {{end}}

{{end}}
<!-- end fields.html -->
